<!-- GOAL SESSION -->
<div class="">
  <!-- MY GOALS -->
  <div id="my_goals" class="flex overflow-x-scroll flex-no-wrap scroll py-5 pl-5 sm:flex-wrap sm:overflow-visible sm:justify-center">
    <% @my_goals.each do |goal| %>
      <!-- GOAL CARD -->
      <% if !goal.complete %>
        <%= link_to goal_path(goal), class:"relative scroll-card bg-white shadow-lg rounded-2xl pt-6 mr-4 p-4 w-56 h-64 text-center text-purple-700 block sm:mb-4 sm:px-0" do %>
          <span class="font-sans font-semibold text-5xl">
            <% done = goal.milestones.count { |milestone| milestone.complete == true } %>
            <% total = goal.milestones.length %>
            <%= done %>
          </span>
          <span class="font-sans font-bold text-2xl text-purple-700">
          / <%= total %>
          </span> <br>
          <span class="font-sans text-xs text-purple-700">
            completed so far
          </span>
          <h3 class="font-sans font-semibold text-base text-gray-800"><%= goal.title.upcase %></h3>
          <div class="absolute inset-x-0 bottom-0 bg-gray-200 rounded-full py-1 w-3/4 mx-auto mt-3 mb-4">
            <span class="inline-block align-middle font-sans font-medium text-xs text-gray-800">
              <%= (Date.today - goal.start_date).to_i %>
              focusing on it
            </span>
          </div>
        <% end %>
      <% end %>
    <% end %>
  </div>
  <!-- BUDDIES GOALS -->
  <% if current_user == @user %>
    <div id="buddies_goals" class="hidden flex overflow-x-scroll flex-no-wrap scroll py-5 pl-5 sm:flex-wrap sm:overflow-visible sm:justify-center">
      <% @buddies_goals.each do |goal| %>
        <!-- GOAL CARD -->
        <% if !goal.complete %>
          <%= link_to goal_path(goal), class:"relative scroll-card bg-white shadow-lg rounded-2xl pt-6 mr-4 p-4 sm:px-0 w-56 h-64 text-center text-purple-700 sm:block sm:mb-4" do %>
            <%= cl_image_tag goal.buddy.photo, height: 60, width: 60, crop: :fill, class: "m-auto rounded-full h-auto object-contain float-none" %>
            <span class="font-sans font-semibold text-5xl">
              <% done = goal.milestones.count { |milestone| milestone.complete == true } %>
              <% total = goal.milestones.length %>
              <%= done %>
            </span>
            <span class="font-sans font-bold text-2xl text-purple-700">
            / <%= total %>
            </span> <br>
            <span class="font-sans text-xs text-purple-700">
              completed so far
            </span>
            <h3 class="font-sans font-semibold text-base text-gray-800"><%= goal.title.upcase %></h3>
            <div class="absolute inset-x-0 bottom-0 bg-gray-200 rounded-full py-1 w-3/4 mx-auto mt-3 mb-4">
              <span class="inline-block align-middle font-sans font-medium text-xs text-gray-800">
                <%= (Date.today - goal.start_date).to_i %>
                focusing on it
              </span>
            </div>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>
